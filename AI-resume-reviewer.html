<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Resume Reviewer</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
  body {
    margin: 0;
    padding: 0;
    font-family: 'Poppins', sans-serif;
    background: radial-gradient(circle at var(--x, 50%) var(--y, 50%), #a1c4fd, #c2e9fb);
    transition: background-position 0.2s ease;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .container {
    background-color: #ffffff;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    max-width: 700px;
    width: 90%;
    z-index: 1;
  }

  h2 {
    text-align: center;
    color: #1e3c72;
    margin-bottom: 10px;
  }

  p {
    text-align: center;
    font-size: 15px;
    color: #444;
  }

  input[type="file"] {
    width: 100%;
    margin-top: 20px;
    margin-bottom: 10px;
  }

  button {
    padding: 12px 20px;
    margin-top: 10px;
    margin-right: 10px;
    border: none;
    border-radius: 6px;
    background: linear-gradient(to right, #667eea, #764ba2);
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: 0.3s ease;
  }

  button:hover {
    background: linear-gradient(to right, #5a6fdc, #6a3f9b);
  }

  #output {
    margin-top: 20px;
    padding: 20px;
    background-color: #f0f8ff;
    border-radius: 10px;
    white-space: pre-wrap;
    color: #333;
  }

  @media (max-width: 600px) {
    button {
      width: 100%;
      margin-bottom: 10px;
    }
  }
</style>

</head>
<body>
  <div class="container">
    <h2>üìÑ AI Resume Reviewer</h2>
    <p>Upload your resume (PDF) to get instant feedback or rewrite suggestions.</p>

    <input type="file" id="pdfInput" accept=".pdf">
    <br>
    <button onclick="reviewResume()">üß† Review Resume</button>
    <button onclick="rewriteResume()">‚úçÔ∏è Rewrite Professionally</button>

    <div id="output"></div>
  </div>

  <script>
    const apiKey = "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"; // ‚õî Replace with your OpenAI key

    async function extractTextFromPDF(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = async function () {
          try {
            const typedArray = new Uint8Array(reader.result);
            const pdf = await pdfjsLib.getDocument(typedArray).promise;
            let fullText = '';
            for (let i = 1; i <= pdf.numPages; i++) {
              const page = await pdf.getPage(i);
              const content = await page.getTextContent();
              const text = content.items.map(item => item.str).join(' ');
              fullText += text + '\n';
            }
            resolve(fullText);
          } catch (error) {
            reject(error);
          }
        };
        reader.onerror = reject;
        reader.readAsArrayBuffer(file);
      });
    }

    async function callOpenAI(prompt) {
      const response = await fetch("https://api.openai.com/v1/chat/completions", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${apiKey}`
        },
        body: JSON.stringify({
          model: "gpt-3.5-turbo",
          messages: [{ role: "user", content: prompt }],
          temperature: 0.7
        })
      });
      const data = await response.json();
      return data.choices?.[0]?.message?.content || "No response from AI.";
    }

    async function reviewResume() {
      const file = document.getElementById("pdfInput").files[0];
      const output = document.getElementById("output");

      if (!file) return alert("Please upload a PDF file.");

      output.innerHTML = "‚è≥ Reading and reviewing your resume...";
      try {
        const pdfText = await extractTextFromPDF(file);
        const prompt = `Please provide constructive feedback on the following resume:\n\n${pdfText}`;
        const result = await callOpenAI(prompt);
        output.innerHTML = result;
      } catch (error) {
        console.error(error);
        output.innerHTML = "‚ùå Error reading the PDF.";
      }
    }

    async function rewriteResume() {
      const file = document.getElementById("pdfInput").files[0];
      const output = document.getElementById("output");

      if (!file) return alert("Please upload a PDF file.");

      output.innerHTML = "‚úçÔ∏è Rewriting your resume...";
      try {
        const pdfText = await extractTextFromPDF(file);
        const prompt = `Rewrite the following resume in a more professional and polished tone:\n\n${pdfText}`;
        const result = await callOpenAI(prompt);
        output.innerHTML = result;
      } catch (error) {
        console.error(error);
        output.innerHTML = "‚ùå Error reading the PDF.";
      }
    }
    document.body.addEventListener('mousemove', function (e) {
    const x = (e.clientX / window.innerWidth) * 100;
    const y = (e.clientY / window.innerHeight) * 100;
    document.body.style.setProperty('--x', `${x}%`);
    document.body.style.setProperty('--y', `${y}%`);
  });
  </script>
</body>
</html>

